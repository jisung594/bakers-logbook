<form [formGroup]="ingredientsForm">
<!-- <form [formGroup]="ingredientsForm" (ngSubmit)="onSubmit()"> -->
    <div formArrayName="ingredients">
        <div
            *ngFor="let ingredient of ingredients.controls; let i = index"
            [formGroupName]="i"
            class="ingredient-row"
        >
            <div *ngIf="ingredient.value.isEditing && editable">
                <input
                    type="text"
                    formControlName="quantity"
                    placeholder="Quantity (e.g. 1 1/2)"
                    class="ingredient-input"
                />
                <select formControlName="unit" class="ingredient-input">
                    <option value="">-- Unit --</option>
                    <option value="cup">cup</option>
                    <option value="tbsp">tbsp</option>
                    <option value="tsp">tsp</option>
                    <option value="g">g</option>
                    <option value="oz">oz</option>
                </select>
                <input
                    type="text"
                    formControlName="name"
                    placeholder="Ingredient name"
                    class="ingredient-input"
                />
                <div class="editing-options-editmode">
                    <button type="button" (click)="saveIngredient(i)">Save</button>
                    <button type="button" (click)="removeIngredient(i)">×</button>
                </div>
            </div>
            <div *ngIf="!ingredient.value.isEditing || !editable">
                <div class="editing-options-viewmode">
                <p>
                    {{ ingredient.value.quantity }} 
                    {{ ingredient.value.unit }}
                    {{ ingredient.value.name }}
                </p>
                <button type="button" (click)="editIngredient(i)">edit</button>
                <button type="button" (click)="removeIngredient(i)">remove</button>
                </div>
            </div>
            <button type="button" (click)="removeIngredient(i)">×</button>
        </div>
    </div>
    <button type="button" (click)="addIngredient()">Add Ingredient</button>
</form>